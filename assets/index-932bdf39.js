import{r as f,g as $,a as z,s as g,_ as m,u as _,e as U,j as t,f as A,h as q,c as oe,dE as Se,B as Ce,eN as ye,i as re,a4 as ae,aq as N,cl as X,G as v,C as j,cO as je,eO as Le,cJ as Pe,b4 as se,eP as Re,aD as ie,eQ as Me,eR as Ie,eq as we,eS as Ne,ef as O,w as Ae,x as ke,aF as le,bn as Be,eT as Ee,dG as M,eU as Z,aC as V,bR as Te,eV as $e,cN as F,F as Q,bp as ce,bo as de,cj as Y,ck as D,c5 as pe,c6 as ue,as as xe,bB as ze,cm as _e,bt as Ue,an as me,eW as qe,eX as Oe}from"./index-2ba9b923.js";import{C as We}from"./stepperIcon-58214ebb.js";const Fe=f.createContext({}),W=Fe,Qe=f.createContext({}),G=Qe;function De(e){return $("MuiStep",e)}z("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const Ge=["active","children","className","component","completed","disabled","expanded","index","last"],Ve=e=>{const{classes:n,orientation:o,alternativeLabel:a,completed:r}=e;return q({root:["root",o,a&&"alternativeLabel",r&&"completed"]},De,n)},Ke=g("div",{name:"MuiStep",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:o}=e;return[n.root,n[o.orientation],o.alternativeLabel&&n.alternativeLabel,o.completed&&n.completed]}})(({ownerState:e})=>m({},e.orientation==="horizontal"&&{paddingLeft:8,paddingRight:8},e.alternativeLabel&&{flex:1,position:"relative"})),He=f.forwardRef(function(n,o){const a=_({props:n,name:"MuiStep"}),{active:r,children:i,className:l,component:s="div",completed:d,disabled:u,expanded:x=!1,index:p,last:h}=a,C=U(a,Ge),{activeStep:S,connector:c,alternativeLabel:b,orientation:L,nonLinear:w}=f.useContext(W);let[y=!1,k=!1,P=!1]=[r,d,u];S===p?y=r!==void 0?r:!0:!w&&S>p?k=d!==void 0?d:!0:!w&&S<p&&(P=u!==void 0?u:!0);const B=f.useMemo(()=>({index:p,last:h,expanded:x,icon:p+1,active:y,completed:k,disabled:P}),[p,h,x,y,k,P]),R=m({},a,{active:y,orientation:L,alternativeLabel:b,completed:k,disabled:P,expanded:x,component:s}),E=Ve(R),T=t.jsxs(Ke,m({as:s,className:A(E.root,l),ref:o,ownerState:R},C,{children:[c&&b&&p!==0?c:null,i]}));return t.jsx(G.Provider,{value:B,children:c&&!b&&p!==0?t.jsxs(f.Fragment,{children:[c,T]}):T})}),Xe=He,Ye=oe(t.jsx("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),Je=oe(t.jsx("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning");function Ze(e){return $("MuiStepIcon",e)}const et=z("MuiStepIcon",["root","active","completed","error","text"]),K=et;var ee;const tt=["active","className","completed","error","icon"],nt=e=>{const{classes:n,active:o,completed:a,error:r}=e;return q({root:["root",o&&"active",a&&"completed",r&&"error"],text:["text"]},Ze,n)},H=g(Se,{name:"MuiStepIcon",slot:"Root",overridesResolver:(e,n)=>n.root})(({theme:e})=>({display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),color:(e.vars||e).palette.text.disabled,[`&.${K.completed}`]:{color:(e.vars||e).palette.primary.main},[`&.${K.active}`]:{color:(e.vars||e).palette.primary.main},[`&.${K.error}`]:{color:(e.vars||e).palette.error.main}})),ot=g("text",{name:"MuiStepIcon",slot:"Text",overridesResolver:(e,n)=>n.text})(({theme:e})=>({fill:(e.vars||e).palette.primary.contrastText,fontSize:e.typography.caption.fontSize,fontFamily:e.typography.fontFamily})),rt=f.forwardRef(function(n,o){const a=_({props:n,name:"MuiStepIcon"}),{active:r=!1,className:i,completed:l=!1,error:s=!1,icon:d}=a,u=U(a,tt),x=m({},a,{active:r,completed:l,error:s}),p=nt(x);if(typeof d=="number"||typeof d=="string"){const h=A(i,p.root);return s?t.jsx(H,m({as:Je,className:h,ref:o,ownerState:x},u)):l?t.jsx(H,m({as:Ye,className:h,ref:o,ownerState:x},u)):t.jsxs(H,m({className:h,ref:o,ownerState:x},u,{children:[ee||(ee=t.jsx("circle",{cx:"12",cy:"12",r:"12"})),t.jsx(ot,{className:p.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:x,children:d})]}))}return d}),at=rt;function st(e){return $("MuiStepLabel",e)}const it=z("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),I=it,lt=["children","className","componentsProps","error","icon","optional","slotProps","StepIconComponent","StepIconProps"],ct=e=>{const{classes:n,orientation:o,active:a,completed:r,error:i,disabled:l,alternativeLabel:s}=e;return q({root:["root",o,i&&"error",l&&"disabled",s&&"alternativeLabel"],label:["label",a&&"active",r&&"completed",i&&"error",l&&"disabled",s&&"alternativeLabel"],iconContainer:["iconContainer",a&&"active",r&&"completed",i&&"error",l&&"disabled",s&&"alternativeLabel"],labelContainer:["labelContainer",s&&"alternativeLabel"]},st,n)},dt=g("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:o}=e;return[n.root,n[o.orientation]]}})(({ownerState:e})=>m({display:"flex",alignItems:"center",[`&.${I.alternativeLabel}`]:{flexDirection:"column"},[`&.${I.disabled}`]:{cursor:"default"}},e.orientation==="vertical"&&{textAlign:"left",padding:"8px 0"})),pt=g("span",{name:"MuiStepLabel",slot:"Label",overridesResolver:(e,n)=>n.label})(({theme:e})=>m({},e.typography.body2,{display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),[`&.${I.active}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${I.completed}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${I.alternativeLabel}`]:{marginTop:16},[`&.${I.error}`]:{color:(e.vars||e).palette.error.main}})),ut=g("span",{name:"MuiStepLabel",slot:"IconContainer",overridesResolver:(e,n)=>n.iconContainer})(()=>({flexShrink:0,display:"flex",paddingRight:8,[`&.${I.alternativeLabel}`]:{paddingRight:0}})),xt=g("span",{name:"MuiStepLabel",slot:"LabelContainer",overridesResolver:(e,n)=>n.labelContainer})(({theme:e})=>({width:"100%",color:(e.vars||e).palette.text.secondary,[`&.${I.alternativeLabel}`]:{textAlign:"center"}})),fe=f.forwardRef(function(n,o){var a;const r=_({props:n,name:"MuiStepLabel"}),{children:i,className:l,componentsProps:s={},error:d=!1,icon:u,optional:x,slotProps:p={},StepIconComponent:h,StepIconProps:C}=r,S=U(r,lt),{alternativeLabel:c,orientation:b}=f.useContext(W),{active:L,disabled:w,completed:y,icon:k}=f.useContext(G),P=u||k;let B=h;P&&!B&&(B=at);const R=m({},r,{active:L,alternativeLabel:c,completed:y,disabled:w,error:d,orientation:b}),E=ct(R),T=(a=p.label)!=null?a:s.label;return t.jsxs(dt,m({className:A(E.root,l),ref:o,ownerState:R},S,{children:[P||B?t.jsx(ut,{className:E.iconContainer,ownerState:R,children:t.jsx(B,m({completed:y,active:L,error:d,icon:P},C))}):null,t.jsxs(xt,{className:E.labelContainer,ownerState:R,children:[i?t.jsx(pt,m({ownerState:R},T,{className:A(E.label,T==null?void 0:T.className),children:i})):null,x]})]}))});fe.muiName="StepLabel";const he=fe;function mt(e){return $("MuiStepButton",e)}const ft=z("MuiStepButton",["root","horizontal","vertical","touchRipple"]),te=ft,ht=["children","className","icon","optional"],bt=e=>{const{classes:n,orientation:o}=e;return q({root:["root",o],touchRipple:["touchRipple"]},mt,n)},gt=g(Ce,{name:"MuiStepButton",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:o}=e;return[{[`& .${te.touchRipple}`]:n.touchRipple},n.root,n[o.orientation]]}})(({ownerState:e})=>m({width:"100%",padding:"24px 16px",margin:"-24px -16px",boxSizing:"content-box"},e.orientation==="vertical"&&{justifyContent:"flex-start",padding:"8px",margin:"-8px"},{[`& .${te.touchRipple}`]:{color:"rgba(0, 0, 0, 0.3)"}})),vt=f.forwardRef(function(n,o){const a=_({props:n,name:"MuiStepButton"}),{children:r,className:i,icon:l,optional:s}=a,d=U(a,ht),{disabled:u,active:x}=f.useContext(G),{orientation:p}=f.useContext(W),h=m({},a,{orientation:p}),C=bt(h),S={icon:l,optional:s},c=ye(r,["StepLabel"])?f.cloneElement(r,S):t.jsx(he,m({},S,{children:r}));return t.jsx(gt,m({focusRipple:!0,disabled:u,TouchRippleProps:{className:C.touchRipple},className:A(C.root,i),ref:o,ownerState:h,"aria-current":x?"step":void 0},d,{children:c}))}),St=vt;function Ct(e){return $("MuiStepConnector",e)}const yt=z("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]),sn=yt,jt=["className"],Lt=e=>{const{classes:n,orientation:o,alternativeLabel:a,active:r,completed:i,disabled:l}=e,s={root:["root",o,a&&"alternativeLabel",r&&"active",i&&"completed",l&&"disabled"],line:["line",`line${re(o)}`]};return q(s,Ct,n)},Pt=g("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:o}=e;return[n.root,n[o.orientation],o.alternativeLabel&&n.alternativeLabel,o.completed&&n.completed]}})(({ownerState:e})=>m({flex:"1 1 auto"},e.orientation==="vertical"&&{marginLeft:12},e.alternativeLabel&&{position:"absolute",top:8+4,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"})),Rt=g("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(e,n)=>{const{ownerState:o}=e;return[n.line,n[`line${re(o.orientation)}`]]}})(({ownerState:e,theme:n})=>{const o=n.palette.mode==="light"?n.palette.grey[400]:n.palette.grey[600];return m({display:"block",borderColor:n.vars?n.vars.palette.StepConnector.border:o},e.orientation==="horizontal"&&{borderTopStyle:"solid",borderTopWidth:1},e.orientation==="vertical"&&{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24})}),Mt=f.forwardRef(function(n,o){const a=_({props:n,name:"MuiStepConnector"}),{className:r}=a,i=U(a,jt),{alternativeLabel:l,orientation:s="horizontal"}=f.useContext(W),{active:d,disabled:u,completed:x}=f.useContext(G),p=m({},a,{alternativeLabel:l,orientation:s,active:d,completed:x,disabled:u}),h=Lt(p);return t.jsx(Pt,m({className:A(h.root,r),ref:o,ownerState:p},i,{children:t.jsx(Rt,{className:h.line,ownerState:p})}))}),It=Mt;function wt(e){return $("MuiStepper",e)}z("MuiStepper",["root","horizontal","vertical","alternativeLabel"]);const Nt=["activeStep","alternativeLabel","children","className","component","connector","nonLinear","orientation"],At=e=>{const{orientation:n,alternativeLabel:o,classes:a}=e;return q({root:["root",n,o&&"alternativeLabel"]},wt,a)},kt=g("div",{name:"MuiStepper",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:o}=e;return[n.root,n[o.orientation],o.alternativeLabel&&n.alternativeLabel]}})(({ownerState:e})=>m({display:"flex"},e.orientation==="horizontal"&&{flexDirection:"row",alignItems:"center"},e.orientation==="vertical"&&{flexDirection:"column"},e.alternativeLabel&&{alignItems:"flex-start"})),Bt=t.jsx(It,{}),Et=f.forwardRef(function(n,o){const a=_({props:n,name:"MuiStepper"}),{activeStep:r=0,alternativeLabel:i=!1,children:l,className:s,component:d="div",connector:u=Bt,nonLinear:x=!1,orientation:p="horizontal"}=a,h=U(a,Nt),C=m({},a,{alternativeLabel:i,orientation:p,component:d}),S=At(C),c=f.Children.toArray(l).filter(Boolean),b=c.map((w,y)=>f.cloneElement(w,m({index:y,last:y+1===c.length},w.props))),L=f.useMemo(()=>({activeStep:r,alternativeLabel:i,connector:u,nonLinear:x,orientation:p}),[r,i,u,x,p]);return t.jsx(W.Provider,{value:L,children:t.jsx(kt,m({as:d,ownerState:C,className:A(S.root,s),ref:o},h,{children:b}))})}),Tt=Et,$t=g(ae)`
&&{
  padding: 50px 50px;
  background: #f5f5f5;
  font-size: 25px;
  font-weight: 700;
  line-height: 1.35;
  transition: background 250ms;
  cursor: pointer;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  :hover {
    background: #dcdcdc;
  },
}
`,zt=g(ae)`
&&{
  overflow: hidden;
  word-break: break-word;
  padding: 20px 20px;
  background: #f5f5f5;
  font-size: 22px;
  font-weight: 700;
  line-height: 1.35;
  transition: background 250ms;
  cursor: pointer;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  :hover {
    background: #dcdcdc;
  },
}
`;function ne(e,n){return function(a){return t.jsx(e,{...a,...n})}}const _t={grid:ne(zt,{elevation:2}),main:ne($t,{elevation:4})},Ut=({children:e,variant:n,...o})=>{const a=_t[n];return t.jsx(a,{...o,children:e})};Ut.defaultProps={variant:"grid"};function qt({children:e,sx:n,onClick:o,disabled:a,className:r,FooterComponent:i,title:l,subTitle:s,headerTitle:d,IconComponent:u}){return t.jsxs(v,{sx:n,className:se("surbox",r,{noaction:a||!o},{disabled:a}),children:[t.jsxs(v,{className:"box",sx:{height:"100%"},children:[t.jsxs("div",{className:"content",onClick:o,children:[t.jsx("div",{className:"icon",children:u}),t.jsxs("div",{className:"text",children:[d&&t.jsx(j,{component:"p",color:"text.secondary",variant:"subtitle2",children:d}),t.jsx(j,{component:"p",color:"inherit",variant:"subtitle1",children:l}),t.jsx(j,{sx:{fontWeight:500},component:"p",color:"inherit",variant:"h5",children:s})]})]}),i&&t.jsxs("div",{className:"footer",children:[t.jsx(i,{}),"   "]})]}),e]})}function ln({sx:e,disableIconMargin:n,onClick:o,disabled:a,className:r,FooterComponent:i,IconComponent:l=null,children:s}){return t.jsxs(v,{sx:e,className:se("surbox",r,{disableIconMargin:n,noaction:a||!o},{disabled:a}),onClick:o,children:[t.jsx("div",{className:"box",children:t.jsxs("div",{className:"content",children:[t.jsx("div",{className:"icon",children:l}),s]})}),i&&t.jsxs("div",{className:"footer",children:[t.jsx(i,{}),"   "]})]})}const Ot=({onChangeCount:e,iconName:n,title:o,className:a,palette:r,quantity:i,onClick:l,onClear:s,sx:d,...u})=>{const x=(N.isUndefined(i)?r==null?void 0:r.quantity:i)||0;return t.jsx(qt,{onClick:p=>{l()},title:o,sx:d,subTitle:r==null?void 0:r.EMB_LIB1,IconComponent:t.jsx(X,{icon:n}),className:a,FooterComponent:p=>t.jsx(v,{display:"flex",alignItems:"center",sx:{height:"100%"},children:r&&t.jsxs(t.Fragment,{children:[t.jsxs(v,{display:"flex",sx:{pr:.5,borderRight:1,borderRightColor:"divider"},flexDirection:"column",alignItems:"flex-end",justifyContent:"center",children:[t.jsxs(j,{color:"text.primary",variant:"subtitle2",children:[r==null?void 0:r.poids," X ",x]}),t.jsx(j,{color:"primary",variant:"h6",children:je((r==null?void 0:r.poids)*x)})]}),e&&t.jsx(Le,{size:"large",color:"secondary",disabled:!r,onClick:h=>{e()}}),t.jsx(Pe,{size:"large",color:"secondary",disabled:!r,onClick:h=>{s()}})]})})})};f.memo(Ot);const cn=({className:e="",sx:n=null,children:o,...a})=>t.jsx(v,{className:e,display:"flex",gap:{sm:.4,lg:2},justifyContent:"flex-end",sx:Re({flexGrow:1,alignItems:"flex-end",p:1,"> *":{maxWidth:"20vw"},"> .validate":{maxWidth:"none !important",flexGrow:1,"&:after":{display:"block",content:'""'}}},n),children:o});function Wt(e){}const be={flexGrow:1,display:"flex",alignItems:"stretch",width:"auto",".MuiInputBase-root":{fontSize:"45px",lineHeight:"1em",cursor:"pointer","& input":{cursor:"pointer",margin:0}}},Ft=e=>({...be,bgcolor:e.palette.grey[100],"& .MuiInputLabel-standard":{...e.typography.h5,color:e.palette.primary.main}}),dn=({title:e,isCompleted:n,iconFab:o=!1,endContent:a,modetotal:r=!1,onClickAdornment:i=Wt,icon:l,valueMax:s,isUs:d,...u})=>{const x=f.useRef(null);return t.jsxs(v,{sx:{position:"relative",alignItems:"center",justifyContent:"center",fontSize:"20px",display:"flex",boxSizing:"border-box",margin:0,flexDirection:"row",flexGrow:0,flexShrink:1},children:[t.jsxs(v,{sx:{width:"3em",mx:1,fabicon:{width:"100%",height:"auto",flexShrink:0,"&.fabcolor":{background:"#acd01cbf"}}},children:[t.jsx(We,{className:"fabicon",active:!1,completed:n,icon:l}),t.jsxs(j,{variant:"h6",className:"title",component:"div",children:[e,d?"*":""]})]}),t.jsx(ie,{sx:{background:d?"#acd01cbf":"#EAFAAD",borderRight:"16px solid #acd01cbf",...u.error&&{borderRightColor:"error.main"},...be},ref:x,label:"",type:"number",variant:"standard",resetValue:!0,margin:"none",autoComplete:"off",fullWidth:!0,...u,inputProps:{valueMax:s}})]})},Qt=({imprimante:e,onChangePrinter:n,label:o,typeImprimante:a})=>{const r={view:"Imprimante",primaryKey:"IMP_NOM",display:"IMP_NOM",title:"selectPrinter",lookupRules:[{field:"IMP_NOM"}],lookupProps:{type:a}};return t.jsx(Ne,{sx:{alignItems:"center"},value:e?{display:e,primaryKey:e}:null,lookupProperty:r,onChangeLookup:i=>n(i?i.primaryKey:null),label:o})},pn=({nbEx:e,imprimante:n,title:o,onChangeNbEx:a,onChangePrinter:r,label:i,typeImprimante:l=we.ETIQ})=>t.jsxs(v,{sx:{flexGrow:1,width:"100%",display:"flex",flexDirection:"column",boxShadow:2,p:.2,gap:.3},children:[a?t.jsxs(v,{display:"flex",children:[t.jsx(ie,{sx:Ft,id:"ref",name:"ex",type:"number",label:o,InputLabelProps:{shrink:!0},value:e,onChange:s=>a(+s.target.value),autoComplete:"off"}),t.jsx(Me,{size:"large",onClick:s=>{a(Math.max(0,e+1))}}),t.jsx(Ie,{size:"large",onClick:s=>{a(Math.max(0,e-1))}})]}):t.jsx(j,{variant:"h5",children:i}),t.jsx(Qt,{imprimante:n,label:i,onChangePrinter:r,typeImprimante:l})]});function un(e){return{...e,quantity:1,poids:e.EMB_TARE_ACHAT}}const xn=(e,n)=>{switch(n){case"Palettes":return e("quantityPalett");case"Emballages":return e("emballage");case"COMMENTS":return e("com");case"PACKAGESSCC":return e("listPackageSSCC");case"PALETTESSCC":return e("listPaletSSCC");case"TOOLS":return e("moreTools");case"PESEEPREPARATION":return e("pesee");case"LotPeseeBorne":return e("pesee");case"FRN":return e("frn");case"TRACA":return e("traca");case"ART":return e("art");case"PRINTERSETTINGS":return e("printerSettings");case"RELIQUAT":return e("modalReliquat");case"RELIQUATPREPARATION":return e("modalReliquat");case"ADRESSLIVFOURNISSEUR":return e("adresseLivFournisseur");default:return e("selection")}},mn=e=>{switch(e.substring(0,3)){case"]C1":return O.Ean128;case"]C0":return O.Code128;case"]E0":return O.Ean13;case"]A0":return O.Code39;default:return O.None}};var J={},Dt=ke;Object.defineProperty(J,"__esModule",{value:!0});var ge=J.default=void 0,Gt=Dt(Ae()),Vt=t,Kt=(0,Gt.default)((0,Vt.jsx)("path",{d:"M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7.64 15H6.49v-4.5l-.9.66-.58-.89L6.77 9h.87v6zm5.86 0H9.61v-1.02c1.07-1.07 1.77-1.77 2.13-2.15.4-.42.54-.69.54-1.06 0-.4-.31-.72-.81-.72-.52 0-.8.39-.9.72l-1.01-.42c.01-.02.18-.76 1-1.15.69-.33 1.48-.2 1.95.03.86.44.91 1.24.91 1.48 0 .64-.31 1.26-.92 1.86-.25.25-.72.71-1.4 1.39l.03.05h2.37V15zm5.25-.85c-.08.13-.56.85-1.76.85-.04 0-1.6.08-2.05-1.51l1.03-.41c.03.1.19.86 1.02.86.41 0 .89-.28.89-.77 0-.55-.48-.79-1.04-.79h-.5v-1h.46c.33 0 .88-.14.88-.72 0-.39-.31-.65-.75-.65-.5 0-.74.32-.85.64l-.99-.41C15.2 9.9 15.68 9 16.94 9c1.09 0 1.54.64 1.62.75.33.5.28 1.16.02 1.57-.15.22-.32.38-.52.48v.07c.28.11.51.28.68.52.37.52.33 1.27.01 1.76z"}),"Pin");ge=J.default=Kt;const Ht=e=>t.jsx(v,{sx:n=>({backgroundColor:n.palette.mode==="dark"?n.palette.grey[700]:n.palette.grey.A300,zIndex:1,width:70,height:70,display:"flex",borderRadius:"20%",justifyContent:"center",alignItems:"center",backgroundClip:"padding-box",color:"text.secondary","& .steppericon":{width:"calc(100 % - 16)"},boxShadow:"0 4px 10px 0 rgba(0,0,0,.25)",...e.completed&&{},...e.active&&{boxShadow:"0 4px 10px 2px "+n.palette.secondary.light}}),children:e.children}),Xt={0:t.jsx(X,{className:"steppericon",icon:"PALETTE"}),1:t.jsx(ge,{className:"steppericon"}),2:t.jsx(X,{className:"steppericon",icon:"EMBALLAGE"})};function Yt(e){const{active:n,completed:o,className:a,icon:r}=e;return t.jsx(Ht,{completed:o,active:n,children:Xt[String(r)]})}function Jt(e){return+e}function fn({mode:e,quantity:n=1,emballage:o,onSave:a,onClose:r}){const{t:i}=le(),l=[0,1],[s,d]=f.useState({tab:N.last(l),isOpen:!!o,poids:Jt(o==null?void 0:o.EMB_TARE_ACHAT),quantity:n}),u=(c,b)=>{d(L=>({...L,[c]:Math.max(0,N.round(typeof b=="function"?b(s[c]):b,c==="poids"?4:1))||0}))},x=c=>u("poids",c),p=c=>u("quantity",c),h=c=>{d(b=>({...b,tab:c}))},C=c=>c===0?s.poids>0:s.quantity>0,S=()=>{try{return s.tab===0?`tare = ${M(s.poids,3,"",0)}`:`${M(s.poids,3,"",0)} X ${s.quantity} = ${M(s.poids*s.quantity,3,"kg",0)}`}catch{return""}};return t.jsxs(v,{sx:{p:1},children:[t.jsx(Tt,{sx:{marginBottom:2,marginTop:2,"& .MuiStepConnector-horizontal":{top:32},"& .steptext":c=>({...c.typography.h5,"&.active":{fontWeight:800,color:b=>b.palette.secondary.main}})},alternativeLabel:!0,nonLinear:!0,activeStep:s.tab,children:N.map(l,c=>t.jsx(Xe,{completed:C(c),children:t.jsx(St,{color:"inherit",onClick:b=>h(c),children:t.jsxs(he,{classes:{alternativeLabel:`steptext ${s.tab===c&&"active"}`},StepIconComponent:Yt,StepIconProps:{icon:c===0&&e==="Emballages"?2:c},children:[c===0&&t.jsxs(t.Fragment,{children:[" ",t.jsx(Be,{children:t.jsx("img",{src:Ee})})," ",M(s.poids,3)," "]}),c===1&&M(s.quantity,0)]})})},c))}),s.tab===0&&t.jsx(Z,{resetValue:!0,value:s.poids,direct:!1,header:Zt,title:"Tare",hideClose:!0,onChangeValue:x,type:"number",fullScreen:!1,fieldName:"inputPalette",numberDefault:!0,expanded:!0,typeKB:"number",excludeKeysFromLayout:["{enter}"],className:""}),s.tab===1&&t.jsx(Z,{resetValue:!0,value:s.quantity,direct:!1,header:en,title:i(e==="Emballages"?"packagingQuantity":"palettQuantity")||"",hideClose:!0,onChangeValue:p,type:"number",fullScreen:!1,fieldName:"inputPalette",numberDefault:!0,expanded:!0,typeKB:"number",excludeKeysFromLayout:["{enter}"],className:""}),t.jsxs(V,{p:2,container:!0,spacing:2,alignItems:"space-between",children:[t.jsx(V,{item:!0,xs:6,children:t.jsx(Te,{size:"large",variant:"contained",color:"success",onClick:c=>a(o,s.poids,s.quantity),children:S()})}),t.jsx(V,{item:!0,xs:6,children:t.jsx($e,{size:"large",variant:"contained",color:"error",onClick:c=>r()})})]})]})}const Zt=({add:e,min:n})=>{const[o]=F("Palette.paddingsPoids",[1,.25,.01],!1,"ARRAY"),[a,r]=F("Palette.paddingPoids",1,!1,"SCALAR"),i=a||1;return t.jsxs(v,{display:"flex",sx:{p:.5},children:[t.jsx(Q,{size:"large",style:{marginRight:"8px",backgroundColor:"green",color:"white"},onClick:l=>e(i),children:t.jsx(ce,{})}),t.jsx(Q,{style:{marginRight:"8px",backgroundColor:"red",color:"white"},size:"large",onClick:l=>n(i),children:t.jsx(de,{})}),t.jsx(Y,{color:"primary",size:"large",exclusive:!0,value:i,onChange:(l,s)=>{r(s)},"aria-label":"tarePalette",children:N.map(o||[],l=>t.jsx(D,{value:l,"aria-label":"bold",children:M(l)}))})]})},en=({add:e,min:n})=>{const[o,a]=F("Palette.paddingsQty",[1,5],!1,"ARRAY"),[r,i]=F("Palette.paddingQty",1,!1,"SCALAR"),l=r||1;return t.jsxs(v,{display:"flex",sx:{p:.5},children:[t.jsx(Q,{size:"large",style:{marginRight:"8px",backgroundColor:"green",color:"white"},onClick:s=>e(l),children:t.jsx(ce,{})}),t.jsx(Q,{style:{marginRight:"8px",backgroundColor:"red",color:"white"},size:"large",onClick:s=>n(l),children:t.jsx(de,{})}),t.jsx(Y,{color:"primary",size:"large",exclusive:!0,value:l,onChange:(s,d)=>{i(d)},"aria-label":"tarePalette",children:N.map(o||[],s=>t.jsx(D,{value:s,"aria-label":"bold",children:M(s,2,"",0)}))})]})},tn=(e,n={suspense:!1,useErrorBoundary:!0,cacheTime:-1})=>pe(["usePreferenceEmballage",e.getQueryKey()],()=>ue(xe().CommunMethods().recherchePreferencesEmballages({variables:{recherche:{rbp:0},filtresOptionnels:null,context:e.current}})),n);function nn({emballage:e,onSelect:n}){return t.jsx(_e,{onClick:o=>n(e),children:t.jsx(Ue,{primary:e.EMB_CODE,secondary:t.jsxs(t.Fragment,{children:[t.jsxs(j,{sx:{display:"inline"},component:"span",color:"primary.main",children:[" ",e.EMB_LIB1," "]})," / ",t.jsx(j,{sx:{display:"inline"},component:"span",color:"secondary.main",children:M(e.EMB_TARE_ACHAT,3," KG")})]})})})}function ve({list:e,onSelect:n}){return t.jsx(ze,{dense:!0,disablePadding:!0,children:N.map(e,o=>t.jsx(nn,{emballage:o,onSelect:n},o.EMB_CODE))})}function hn({onSelect:e}){var a,r;const n=me(),o=tn(n);return t.jsx(ve,{list:((r=(a=o.data)==null?void 0:a.res)==null?void 0:r.result)||[],onSelect:e})}const on=(e,n={suspense:!1,useErrorBoundary:!0,cacheTime:-1})=>pe(["usePreferencePalette",e.getQueryKey()],()=>ue(xe().CommunMethods().recherchePreferencesPalettes({variables:{recherche:{rbp:0},filtresOptionnels:null,context:e.current}})),n);function bn({onSelect:e}){var a,r;const n=me(),o=on(n);return t.jsx(ve,{list:((r=(a=o.data)==null?void 0:a.res)==null?void 0:r.result)||[],onSelect:e})}const gn=g(e=>t.jsx(qe,{disableGutters:!0,elevation:0,square:!0,...e}))(({theme:e})=>({border:`1px solid ${e.palette.divider}`,"&:not(:last-child)":{borderBottom:0},"&::before":{display:"none"},"& .MuiCollapse-root":{overflow:"auto"}})),vn=g(e=>t.jsx(Oe,{expandIcon:null,...e}))(({theme:e})=>({backgroundColor:e.palette.mode==="dark"?"rgba(255, 255, 255, .05)":"rgba(0, 0, 0, .03)",flexShrink:0,padding:.2,"& .MuiAccordionSummary-content":{display:"flex",alignItems:"center",gap:8},"& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(90deg)"}}));function Sn({onChangeManquantReliquat:e,ManquantReliquat:n}){const{t:o}=le();return t.jsxs(Y,{size:"large",sx:{width:"100%","&:hover":{background:"inherit"}},exclusive:!0,onChange:(a,r)=>{r!=null&&e(r)},value:n,children:[t.jsx(D,{sx:{width:"100%","&.Mui-selected, &.Mui-selected:hover":{bgcolor:"red",color:"#fff"}},fullWidth:!0,value:"M","aria-label":"list",children:o("manquant")}),t.jsx(D,{sx:{width:"100%","&.Mui-selected,  &.Mui-selected:hover":{bgcolor:"green",color:"#fff"}},fullWidth:!0,value:"R","aria-label":"module",children:o("reliquat")})]})}export{hn as A,pn as B,fn as I,dn as L,Ut as M,qt as P,gn as S,Sn as T,ln as a,cn as b,vn as c,bn as d,un as e,It as f,xn as g,sn as h,Tt as i,Xe as j,St as k,he as l,mn as m,Ft as s};
